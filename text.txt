플레이어 정보
진열대에 진열되어 있는 Item들 (Type 8)
당일자 Event
손님 pk -> 손님 선호하는 Category 진열장에 있는 선호 Item들
손님의 정보 + 힌트: 사기정도, 잘수집정도, 부주의함
거래에 필요한 정보 (레전더리 확률값, 유니크 확률값, 레어 확률값, 진품 확률값) (Type 7)
다음 날 넘어갈 때, 정산 -> 결과
다음 주로 넘어갈 때, 정산 (일별 정산 포함) -> 결과
해당 아이디 있는지 확인 (Type 1)
특정 플레이어가 모든 게임 세션에 걸쳐 발견 못 한 아이템 종류명 (Type 10)


모든 상황에서, 게임 종료 선택지는 있어야 (0번) -> 게임 종료시 update gamesession, update
로그인 직후, 아이템 카탈로그, 고객 카탈로그 정보, World Record는 DB에서 미리 불러옴

<빛 상환 / 아이템 처리>
- 개인 빛 상환
  - 남은 빚 표시
  - 선택지: 2000, 1000, 500, 100 상환
- 가게 대출/상환
  - 남은 빚 표시
  - 선택지 (총 8개 한 번에 표시):
    - 대출: 2000, 1000, 500, 100
    - 상환: 2000, 1000, 500, 100
- 아이템 처리
  - 복원 or 경매 입력
  - 복원/경매 처리 가능한 Item 표시
  - 아이템 번호 받기
  - 실제로 처리
- 공통
  - 그만두고 메인으로 돌아가기
  - 그만두고 메뉴로 돌아가기


<고객에게 판매>
"감정가"에 80%에만 판매 가능
선택지: 판매 or 거절
필요한 정보: 아이템의 키 (카탈로그 아닌, 실제 생성된 아이템의 키), 고객의 카탈로그 번호


<고객에게서 구매>
모든 과정에서, 거래를 중단하고 메인 메뉴로 돌아갈 수 있어야 함
추가로, 서브 다이얼로그에서는 선택을 취소하고 메인 다이얼로그로 되돌아 갈 수 있어야 함
- 화면에 표시될 것들
  - 최초 제시가
  - 구매가
  - 감정가
  - 물건 조사: 연 힌트 (힌트 설명 + 힌트 값), 열지 않은 힌트
  - 등급 감정 (현재 감정 등급, 변동 구매가, 변동 감정가)
  - 찾은 흠 개수 (개수, 변동 구매가, 변동 감정가)
  - 진위 판정 (진위 여부, 변동 구매가, 변동 감정가)
  - 고객 뒷 조사 (아래 3개)
    - 사기칠 거 같은 비율
    - 수집가 능력
    - 대충 관리함
- 취할 수 있는 동작
  - 물건 조사 (최대 6회)
  - 등급 감정
    - 선택지: 레어 [20] or 유니크 [30] or 레전더리 [50]
    - 실행 후: 현 감정 등급, 레어 1.2 유니크 1.5 레전더리 1.7
  - 흠 찾기
    - 선택지: 하급 흠 찾기 [20], 중급 ... [60], 고급 ... [100]
    - 실행 후: 찾은 흠 개수 + 구매가 감정가: 찾은 흠 가격 * 0.05 * 물건 가격
  - 진위 판정 [200]
    - 실행 후: 확정 진위 여부, 구매가, 감정가
  - 새 물건 힌트 열기 [10]
    - 실행 결과: 힌트 값, 힌트 설명
  - 새 고객 힌트 열기
    - 선택지
      - 사기칠 거 같은 비율 [10]
      - 수집가 능력 [10]
      - 대충 관리함 [10]
    - 한 번 연 힌트는 게임 끝나기 (게임 클리어 or 오버) 전까지는 열린 상태로 남아 있음 (CUSTOMER_HIDDEN_DISCOVERED_IN_GAME_SESSION)
  위 5개 자세한 로직은, Phase2 README 및 json data 문서 참조
  - 거래 수락
    - 돈이 부족하면, 거부
    - 소지금 줄이기
    - 아이템 상태 전시 중으로 변경
    - 거래를 기록
      - 구매가 기록
      - 구매일 기록
  - 거래 거부: 해당 거래 삭제


<정산>
- 해당 Query문 실행, 결과 출력
- DB에 해당 값 Update
- 값이 음수 -> 게임 오버 출력
- 다음 날짜로 진행


<메인>
로그인 / 회원가입 (누름 -> 회원가입 성공/실패)
로그인 이후, 월드 레코드, 아이템 카탈로그, 고객 카탈로그 불러옴
로그아웃, 게임 시작, 월드 레코드 (아이디, 닉네임, 전당포 이름, 종료 일수, 종료 일자 - 종료 일수 빠른 순으로)
게임 시작
  - 게임 세션 불러오기 요청
    - 없으면 -> 게임 세션 생성 요청
  - 전시된 아이템 정보 불러옴 (이후에는, 전시 목록을 클라이언트에서 수정하며 사용)
    - 불러올 Field:
      - displayPositionKey: 전시 위치
      - askingPrice: 최초 제시가
      - purchasePrice: 실 구매가
      - appraisedPrice: 감정가
      - boughtDate: 구매일
      - sellerName: 판매 고객 이름 (PK 통해서 가져옴)
      - foundGrade: 당시의 표시 등급
      - foundFlawEa: 당시의 찾아낸 흠 개수
      - authenticity: 당시의 표시 진위 여부 (1:진품/0:가품/-1:미확인)
      - itemState: 0~5 ITEM_STATE의 값
      - itemKey: PK ITEM_KEY
      - itemCatalogKey: FK ITEM_CATALOG_KEY
  - 남은 거래
    - 있으면 -> 남은 거래들 출럭 -> 선택지 1개: 가장 앞선 남은 거래를 재개
    - 없으면 -> 새로운 거래 3개 생성 요청 -> 화면에 표시 -> 선택지: 가장 앞선 거래 재개
      - 거래 3개 생성 시
        - 고객 겹치면 안 됨
        - 아이템 카탈로그는 겹쳐도 문제 없음
        - 이벤트 수치에 따라 가격이 변동
          - 기본: 최초 제시가=감정가
          - 이벤트 수치에 따라, 최초 제시가, 구매가, 감정가가 변할 수 있음 (Random하게 1가지에만 영향)
            - 최초 제시가 = 아이템 카탈로그 기준가 * ... (Phase2 README 거래중동작-동작-최초제시가 참조)
            - 각 이벤트에는 카테고리가 있으며, 매칭되는 카테고리의 아이템에만 영향 미침
            - 영향을 미치는 영역이 다름
            - 부호는 카테고리에 있음
            - % 비율로 거래에 영향 미치며, 비율 자체는 Random하게 생성됨
            - 이벤트 겹치는 경우, 영향 비율을 모두 더해서 최종 곱할 수를 구함
  - 거래 종료 이후
    - 당일 거래 모두 마쳤는지 (=대기중인 거래 없는지) 확인
      - 마쳤다면: 정산 실행 요청
      - 마치지 않았다면: 다음 중 선택
        - 다음 거래 실행
        - 빛 상환 / 아이템 처리